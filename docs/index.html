<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>RAGベース NotebookLM風ローカルアプリ「plower」</title>
    <link rel="stylesheet" href="style.css"> 
    <script src='https://unpkg.com/tesseract.js@5.1.0/dist/tesseract.min.js'></script>
</head>
<body>
    <h1>RAGベース NotebookLM風アプリ「plower」</h1>

    <div class="rag-controls-header">
        <label for="fileInput">RAGソース文書 (Textファイル):</label>
        <input type="file" id="fileInput" accept=".txt" multiple>
        <button id="resetDocsButton">RAGソースをリセット (LocalStore全削除)</button>
    </div>

    <div class="rag-source-container">
        <div id="fileList">
            <h3>RAGソースファイル一覧 (永続化/アップロード)</h3>
            <ul id="fileListUl">
            </ul>
        </div>
        
        <div id="fileContent">【ここに読み込まれた文書のプレビューまたは選択内容が表示されます】</div>
    </div>
    <hr>

    <label for="pasteArea">一時的なRAGコンテキストとしてテキストまたは画像を貼り付け:</label>
    <textarea id="pasteArea" placeholder="ここにテキストを貼り付けてください。Ctrl+Vで画像を貼り付けるとOCR処理が開始されます。"></textarea>

    <button id="saveOcrButton">OCR/貼付テキストを永続ファイルとして保存</button>
    <hr>

    <label for="userInput">質問を入力:</label>
    <textarea id="userInput" placeholder="質問を入力してください..."></textarea>
    
    <label for="modelSelect">モデル選択:</label>
    <select id="modelSelect">
        <option value="gemma:7b">Gemma 7B (Ollama)</option>
        <option value="gpt-oss:20b" selected>GPT-OSS 20B (Ollama)</option>
        <option value="gemma3:12b">Gemma 12B (Ollama)</option>
        <option value="gpt-oss:120b">GPT-OSS 120B (Ollama)</option>

        <option value="gemini-1.5-flash">Gemini 1.5 Flash (クラウド)</option>
        <option value="gemini-1.5-pro">Gemini 1.5 Pro (クラウド)</option>
    </select>
    
    <button id="sendButton">送信</button>
    
    <div id="chatLog"></div>

    <script src="script.js"></script>
</body>
</html>